# This is a basic workflow to help you get started with Actions

name: CHECK CI

# Controls when the workflow will run
on:
  # Triggers the workflow on close issue
  issues:
    types:
      - closed
      - reopened

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  check-bvt-issue:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3
      

      - env:
          ISSUE_NUM: ${{ github.event.issue.number }}
      
        run: |
          echo $ISSUE_NUM
        

      - name: echo contains true
        if: contains(github.event.issue.labels.*.name, 'bug')
    
        run: |
          para1=`grep -r 'issue#$ISSUE_NUM' ${{ github.workspace }}`
          if [ ! -n "$para1" ]; then
            echo "IS NULL"
          else
            echo "NOT NULL"
          fi
                  
      - name: Set selected color
        run: echo '::set-output name=SELECTED_COLOR::green'
        id: random-color-generator
        
      - name: Get color
        run: echo "The selected color is ${{ steps.random-color-generator.outputs.SELECTED_COLOR }}"
        
        
  issue-reopen:
    runs-on: ubuntu-latest
    steps:
      - name: Reopen Issue
        uses: actions/checkout@v3
        with:
          actions: 'open-issue'
          token: ${{ secrets.ACTION_SECRET }}
          issue-number: ${{ github.event.issue.number }}
